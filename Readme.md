# IPNinja

## Flask API сервис.

Для того, чтобы пользоваться сервисом должен быть установлен Python версии 3.6 или выше.
База данных mongodb. А так же установлены зависимости из файла requirements.txt
Командой `pip install -r requirements.txt`

0. Для вызова помощника используйте команду:

```cmd
    python main.py --help
```

1. Для получения названий списков ip адресов (возвращает список):

```cmd
    python main.py iplist
```

2. Для получения кол-ва уникальных названий списков ip адресов (возвращает число):

```cmd
    python main.py niplist
```

3. Функция вхождения ip в подсеть. На вход IP и подсеть. На выходе True если IP входит в подсеть или False если не входит:

```cmd
    python main.py ip_with_netmask -ip 69.78.70.144/29
    python main.py ip_with_netmask -ip 69.78.70.144/255.255.255.254
```

4. Функция для получения данных по IP адресу, реализована на api https://ipdata.co/.
   Для данной выполнения данной функции необходимо зарегистрироваться на упомянутом сайте и вставить полученный API_KEY в файл settings.py в переменную IPDATA_API_KEY:

```cmd
    python main.py ipdata -ip 69.78.70.144/29
```

5. Для загрузки репозитория https://github.com/firehol/blocklist-ipsets, создания базы mongodb, создания коллекции и загрузки данных (ip из репозиторя) в коллекцию. Для изменения дефолтных значений хоста и порта для базы, необходимо заглянуть в файл settings.py:

```cmd
    python main.py init
```
